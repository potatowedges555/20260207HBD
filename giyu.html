<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>BGM</title>
  <style>
    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      text-align:center;
      background:#111;
      color:#fff;
      padding: 18vh 16px 40px;
    }
    h2{ margin:0 0 18px; font-weight:700; }
    .row{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    button{
      font-size:18px; padding:12px 22px; border-radius:999px;
      border:none; cursor:pointer;
    }
    button.secondary{
      opacity:.92;
    }
    #hint{ margin-top:14px; font-size:14px; opacity:.75; }
    #reveal{
      display:none; margin-top:22px; font-size:16px; opacity:.92; line-height:1.6;
    }
    #status{ margin-top:14px; font-size:14px; opacity:.75; }
  </style>
</head>
<body>

  <h2>ğŸ§ è«‹è†è½</h2>

  <!-- 1) æŠŠé€™è£¡æ”¹æˆä½ çš„éŸ³æª”æª”å -->
  <audio id="bgm" src="Demon slayer_ Theme of Giyu Tomioka å†¨å²¡ç¾©å‹‡ã®ãƒ†ãƒ¼ãƒï½ç‚­æ²»éƒã®æˆ¦ã„ï½é¬¼æ®ºéšŠ BGM - OST Cover.mp3" preload="none"></audio>

  <div class="row">
    <!-- æ’­æ”¾/æš«åœåˆ‡æ› -->
    <button id="playBtn" onclick="togglePlay()">â–¶ æ’­æ”¾</button>

    <!-- æ‰‹å‹•æ­æ›‰ï¼ˆä½ æƒ³ä»€éº¼æ™‚å€™å…¬å¸ƒå°±ä»€éº¼æ™‚å€™æŒ‰ï¼‰ -->
    <button class="secondary" id="revealBtn" onclick="revealNow()">ğŸ‘€ å…¬å¸ƒç­”æ¡ˆ</button>
  </div>

  <div id="status">ç‹€æ…‹ï¼šæœªæ’­æ”¾</div>
  <div id="hint">ï¼ˆå¯éš¨æ™‚æš«åœ / çºŒæ’­ï¼›ç­”æ¡ˆç”±ä½ æ±ºå®šä»€éº¼æ™‚å€™æ­æ›‰ï¼‰</div>

  <div id="reveal">
    ä½ å‰›å‰›è½åˆ°çš„æ˜¯ï¼š<br>
    <!-- 2) æŠŠé€™è£¡æ”¹æˆä½ è¦çš„è§’è‰²/ç­”æ¡ˆ -->
    <strong id="answerText">å¯Œå²¡ç¾©å‹‡</strong>
    <div style="margin-top:14px;">
      <img
        src="ç¾©å‹‡.png"
        alt="è§’è‰²åœ–ç‰‡"
        style="
          width:180px;
          max-width:70%;
          border-radius:16px;
        "
      />
    </div>
  </div>

  <script>
    /***************
     * ä½ å¯ä»¥æ”¹çš„è¨­å®š
     ***************/
    const REVEAL_MODE = "manual"; 
    // "manual" = åªæŒ‰ã€Œå…¬å¸ƒç­”æ¡ˆã€æ‰é¡¯ç¤º
    // "after_seconds" = æ’­æ”¾å¾Œ X ç§’è‡ªå‹•é¡¯ç¤º
    // "on_end" = æ’­å®Œæ‰é¡¯ç¤º

    const REVEAL_AFTER_SECONDS = 15; // only used when REVEAL_MODE="after_seconds"

    /***************
     * ç¨‹å¼æœ¬é«”
     ***************/
    const audio = document.getElementById("bgm");
    const playBtn = document.getElementById("playBtn");
    const revealDiv = document.getElementById("reveal");
    const statusDiv = document.getElementById("status");

    let revealTimer = null;
    let revealed = false;

    function setStatus(text){
      statusDiv.textContent = "ç‹€æ…‹ï¼š" + text;
    }

    function clearRevealTimer(){
      if (revealTimer) {
        clearTimeout(revealTimer);
        revealTimer = null;
      }
    }

    function scheduleRevealIfNeeded(){
      clearRevealTimer();

      if (revealed) return;

      if (REVEAL_MODE === "after_seconds") {
        revealTimer = setTimeout(() => {
          revealNow();
        }, REVEAL_AFTER_SECONDS * 1000);
      }
      // "manual" ä¸åšäº‹
      // "on_end" ç”± ended äº‹ä»¶è™•ç†
    }

    async function togglePlay(){
      try {
        if (audio.paused) {
          await audio.play(); // éœ€è¦ä½¿ç”¨è€…é»æ“Šæ‰æœƒæˆåŠŸï¼ˆç€è¦½å™¨è¦å‰‡ï¼‰
          playBtn.textContent = "â¸ æš«åœ";
          setStatus("æ’­æ”¾ä¸­");
          scheduleRevealIfNeeded();
        } else {
          audio.pause();
          playBtn.textContent = "â–¶ çºŒæ’­";
          setStatus("å·²æš«åœ");
          // æš«åœæ™‚ä½ å¯ä»¥é¸æ“‡ã€Œæ˜¯å¦å–æ¶ˆè‡ªå‹•æ­æ›‰è¨ˆæ™‚ã€
          // é€™è£¡æ¡ç”¨ï¼šæš«åœå°±å–æ¶ˆè¨ˆæ™‚ï¼ŒçºŒæ’­å†é‡æ–°è¨ˆæ™‚
          clearRevealTimer();
        }
      } catch (e) {
        // æŸäº›ç€è¦½å™¨/æƒ…å¢ƒæœƒæ“‹ autoplayï¼Œæç¤ºä½¿ç”¨è€…å†é»ä¸€æ¬¡å³å¯
        alert("å¦‚æœæ²’æœ‰è²éŸ³ï¼Œè«‹å†é»ä¸€æ¬¡æ’­æ”¾ï¼ˆç€è¦½å™¨é™åˆ¶ï¼‰");
      }
    }

    function revealNow(){
      revealed = true;
      clearRevealTimer();
      revealDiv.style.display = "block";
    }

    // æ’­å®Œè¡Œç‚º
    audio.addEventListener("ended", () => {
      playBtn.textContent = "â–¶ é‡æ’­";
      setStatus("æ’­æ”¾çµæŸ");
      clearRevealTimer();
      if (REVEAL_MODE === "on_end" && !revealed) {
        revealNow();
      }
      // é‡æ’­æ™‚å¾é ­é–‹å§‹
      audio.currentTime = 0;
    });

    // åªè¦æŒ‰ä¸‹é‡æ’­/æ’­æ”¾æ™‚ï¼Œè‹¥æŒ‰éˆ•é¡¯ç¤ºã€Œâ–¶ é‡æ’­ã€å°±å¾é ­æ’­
    // ï¼ˆå¯é¸ï¼šä½ ä¹Ÿå¯ä»¥å–æ¶ˆé€™æ®µï¼Œç¶­æŒåŸæœ¬ togglePlay å³å¯ï¼‰
    playBtn.addEventListener("click", () => {
      if (playBtn.textContent.includes("é‡æ’­")) {
        audio.currentTime = 0;
      }
    });
  </script>
</body>
</html>







